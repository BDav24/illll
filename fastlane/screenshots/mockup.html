<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=430, initial-scale=1, user-scalable=no">
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@600;700&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    width: 430px;
    height: 932px;
    background: #F2F2F7;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow: hidden;
    font-family: 'Quicksand', sans-serif;
  }
  /* Tablet mode: fill entire viewport, no phone frame */
  body.tablet {
    width: 100vw;
    height: 100vh;
  }
  #caption {
    color: #1A1A1A;
    font-size: 26px;
    font-weight: 700;
    text-align: center;
    padding: 36px 32px 20px;
    line-height: 1.25;
  }
  body.tablet #caption {
    font-size: 32px;
    padding: 48px 40px 24px;
  }
  #phone-wrapper {
    position: relative;
    flex-shrink: 0;
  }
  #phone-frame {
    width: 380px;
    height: 842px;
    border-radius: 48px;
    border: 3.5px solid #333;
    overflow: hidden;
    background: #000;
    box-shadow:
      0 0 0 0.5px rgba(255,255,255,0.08),
      0 30px 80px rgba(0,0,0,0.8),
      inset 0 0 0 0.5px rgba(255,255,255,0.04);
  }
  body.tablet #phone-wrapper {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    padding: 0 24px 8px;
  }
  body.tablet #phone-frame {
    width: 100%;
    height: 100%;
    border-radius: 24px;
    border: 3px solid #333;
    box-shadow:
      0 0 0 0.5px rgba(255,255,255,0.08),
      0 20px 60px rgba(0,0,0,0.7),
      inset 0 0 0 0.5px rgba(255,255,255,0.04);
  }
  body.tablet #phone-inner {
    padding-top: 0;
    height: 100%;
  }
  body.tablet #phone-frame iframe {
    width: 100%;
    height: 100%;
    zoom: 1;
  }
  #phone-inner {
    padding-top: 18px;
    background: #0F0F0F;
    overflow: hidden;
  }
  #phone-frame iframe {
    width: 430px;
    height: 932px;
    border: none;
    zoom: 0.8837;
    pointer-events: none;
    display: block;
  }
  #subcaption {
    color: #5A7FCC;
    font-size: 13px;
    font-weight: 600;
    margin-top: 14px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
  }
  body.tablet #subcaption {
    padding: 16px 0;
    font-size: 15px;
  }
</style>
</head>
<body>
  <div id="caption"></div>
  <div id="phone-wrapper">
    <div id="phone-frame">
      <div id="phone-inner">
        <iframe id="app" src="http://localhost:8081"></iframe>
      </div>
    </div>
  </div>
  <div id="subcaption">ILLLL</div>
  <script>
    const params = new URLSearchParams(window.location.search);
    const caption = params.get('caption') || '';
    const lang = params.get('lang') || '';
    const scene = params.get('scene') || '';
    const screenshot = params.get('screenshot') || '';
    const tablet = params.get('tablet') === '1';

    if (tablet) document.body.classList.add('tablet');

    // RTL support for caption
    const RTL_LANGS = ['ar'];
    const captionEl = document.getElementById('caption');
    captionEl.textContent = caption;
    if (RTL_LANGS.includes(lang)) {
      captionEl.setAttribute('dir', 'rtl');
    }

    // Build iframe URL with screenshot params
    const iframe = document.getElementById('app');
    const path = params.get('path') || '';
    const appUrl = new URL('http://localhost:8081' + path);
    if (screenshot) appUrl.searchParams.set('screenshot', screenshot);
    if (lang) appUrl.searchParams.set('lang', lang);
    if (scene) appUrl.searchParams.set('scene', scene);
    iframe.src = appUrl.toString();
  </script>
</body>
</html>
